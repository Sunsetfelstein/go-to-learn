UTF-8 — это наиболее широко используемая кодировка для стандарта Unicode. В нем для представления каждой кодовой точки, то есть каждого символа или модификатора, используется 4 байта (32 бита). По этой причине простейший способ представления кодовых точек стандарта Unicode состоит в том, чтобы сохранять по 4 байта для каждой кодовой точки. Такой способ кодирования получил название UTF-32 и практически не применяется из-за большого расхода места на диске и в памяти. В силу особенностей реализации стандарта Unicode 11 из 32 бит всегда содержат нули. Еще одной распространенной кодировкой является UTF-16, в которой для представления каждой кодовой точки используются одна или две 16-битные (2-байтовые) последовательности. Однако и этот подход слишком расточителен, поскольку подавляющая часть создаваемого в мире контента задействует кодовые точки, способные поместиться в 1 байте. Здесь в игру вступает кодировка UTF-8.
Эта кодировка продумана. Она использует 1 байт для представления символов стандарта Unicode со значениями не выше 128 (что включает в себя буквы, цифры и знаки пунктуации, применяемые в английском языке), но расширяется до 4 байт, когда нужно представить кодовые точки стандарта Unicode с более высокими значениями. В результате этого UTF-8 занимает столько же места, сколько UTF-32, только в самом худшем случае. У этой кодировки есть и другие приятные особенности. В отличие от кодировок UTF-32 и UTF-16 вам не нужно беспокоиться о различиях между «младшеконечным» и «старшеконечным» форматами следования байтов. В кодировке UTF-8 также можно взглянуть на любой байт последовательности и определить, в каком ее месте вы находитесь: в начале или где-то посередине. Это значит, что вы не сможете случайно прочитать символ неверно.
Единственным недостатком UTF-8 является невозможность произвольного доступа к строке, представленной в данном формате. Хотя вы сможете определить, что символ находится где-то в середине строки, но нельзя будет сказать, сколько символов расположено перед ним. Для этого нужно посчитать эти символы с начала строки. Язык Go не требует представления строки в кодировке UTF-8, но всячески это поддерживает. В следующих главах будет показано, как следует работать со строками в кодировке UTF-8. Стоит отметить еще один интересный факт: кодировку UTF-8 в 1992 году создали Кен Томпсон и Роб Пайк (Rob Pike), которые впоследствии написали и язык Go.